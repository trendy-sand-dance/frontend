<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <link href="output.css" rel="stylesheet">
  <script src="https://unpkg.com/htmx.org@2.0.4"
    integrity="sha384-HGfztofotfshcF7+8n44JQL2oJmowVChPTg48S+jvZoztPfvwD79OC/LTtG6dMp+"
    crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/3f6a90a5aa.js" crossorigin="anonymous"></script>
</head>

<body>


  <div class="flex flex-col w-screen h-screen">

    <div class="flex flex-row flex-grow">

      <!-- Game Canvas -->
      <div hx-get="/game" hx-trigger="load" hx-swap="outerHTML">

      </div>


      <section class="flex flex-col bg-[#01FFFF] w-1/6 border border-cyan-400">

        <div class="h-5/6">
        </div>

        <div class="flex justify-center flex-col h-1/6 p-4">
          <div class="border border-cyan-600 rounded-md p-2">
            <input type="text" placeholder="Type here..." class="bg-[#01FFFF] w-full outline-none">
            <div class="flex flex-row justify-between">
              <button type="">:)</button>
              <button type="">=></button>
            </div>
          </div>
        </div>

      </section>

    </div>

    <nav class="flex flex-start items-center w-screen bg-[#01FFFF]">

      <div class="">
        <div class="flex flex-row bg-cyan-500 rounded-md">

          <div class="flex justify-center">
            <img src=<%=img_avatar %> alt="Avatar" class="bg-cyan-100 rounded-[50%] max-w-10 h-auto">
          </div>

          <div id='openProfileDialog' class="flex flex-row w-32 justify-between cursor-pointer hover:bg-white">
            <p class="border-l border-black p-2">
              <%= username %>
            </p>
            <i class='fas fa-pen text-xs flex'></i>
          </div>

          <dialog id="profileDialog" class="rounded-md p-4 bg-[#01FFFF]">

            <div id="closingDiv" class="flex flex-col">

              <div class="flex justify-end">
                <button type="button" id="closeProfileDialog">X</button>
              </div>

              <div class="flex flex-row">
                <div class="flex flex-col">
                  <p class="p-2">Username</p>
                  <p class="p-2">E-mail</p>
                  <p class="p-2">Avatar</p>
                </div>

                <div class="flex flex-col">
                  <p class="p-2">
                    <%= username %>
                  </p>
                  <p class="p-2">
                    <%= email %>
                  </p>
                  <img src=<%=img_avatar %> alt="Avatar" class="bg-cyan-100 rounded-[50%] max-w-10 h-auto">
                </div>
              </div>
              <div class="flex justify-end w-[100%] p-2 border-t border-black">
                <a href="/" class="text-gray-700 cursor-pointer">Sign-out</a>
              </div>
            </div>

          </dialog>

          <script>
            let showModal = false;
            const dialog = document.getElementById("profileDialog");
            function toggleModal() {
              showModal = !showModal
              if (showModal) {
                dialog.showModal();
              } else {
                dialog.close();
              }
            }
            document.getElementById("openProfileDialog").addEventListener("click", () => toggleModal());
            dialog.addEventListener("click", (event) => {if (event.target.id !== 'closing-div') {toggleModal();} });
          </script>

        </div>
      </div>

      <button type="button" class="p-2">Character</button>
      <button type="button" class="p-2">Friends</button>
    </nav>

  </div>

</body>

</html>
